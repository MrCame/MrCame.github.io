<!doctype html>
<html class="theme-next use-motion theme-next-mist">
<head>
  

<meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>


<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />








  <link rel="stylesheet" type="text/css" href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5"/>



  
    <link href='//fonts.lug.ustc.edu.cn/css?family=Lato:300,400,700,400italic&subset=latin,latin-ext' rel='stylesheet' type='text/css'>
  


<link rel="stylesheet" type="text/css" href="/vendors/font-awesome/css/font-awesome.min.css?v=4.4.0" />

<link rel="stylesheet" type="text/css" href="/css/main.css?v=0.4.5.2"/>




  <meta name="keywords" content="Hexo,next" />





  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=0.4.5.2" />


<meta name="description">
<meta property="og:type" content="website">
<meta property="og:title" content="Welcome to My World">
<meta property="og:url" content="http://yoursite.com/page/2/index.html">
<meta property="og:site_name" content="Welcome to My World">
<meta property="og:description">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Welcome to My World">
<meta name="twitter:description">


<script type="text/javascript" id="hexo.configuration">
  var CONFIG = {
    scheme: 'Mist',
    sidebar: 'always'
  };
</script>



  <title> Welcome to My World </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  <!--[if lte IE 8]>
  <div style=' clear: both; height: 59px; padding:0 0 0 15px; position: relative;margin:0 auto;'>
    <a href="http://windows.microsoft.com/en-US/internet-explorer/products/ie/home?ocid=ie6_countdown_bannercode">
      <img src="http://7u2nvr.com1.z0.glb.clouddn.com/picouterie.jpg" border="0" height="42" width="820"
           alt="You are using an outdated browser. For a faster, safer browsing experience, upgrade for free today or use other browser ,like chrome firefox safari."
           style='margin-left:auto;margin-right:auto;display: block;'/>
    </a>
  </div>
<![endif]-->
  






  <div class="container one-column 
   page-home 
">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">Welcome to My World</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle"></p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu ">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      

      
      
    </ul>
  

  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div id="content" class="content"> 
  <section id="posts" class="posts-expand">
    
      

  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                <a class="post-title-link" href="/2016/05/05/hexo-1/" itemprop="url">
                  Hexo的NexT主题默认显示侧边栏
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            发表于
            <time itemprop="dateCreated" datetime="2016-05-05T00:15:01+08:00" content="2016-05-05">
              2016-05-05
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp; 分类于
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Hexo/" itemprop="url" rel="index">
                    <span itemprop="name">Hexo</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

        </div>
      </header>
    


    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody">
            
              <p>用Hexo的Next主题有一段时间了，但是发觉边框栏即便设置了 <code>sidebar: always</code>，也不能自动展开</p>
<p>在网上查了查，找到了<a href="&quot;http://www.jianshu.com/p/29589e303f4d&quot;">解决办法</a></p>
<p>在 <code>\themes\next\source\js\motion_global.js</code> 做如下修改：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">sidebarToggle: function (integrator) &#123;</span><br><span class="line">    sidebarToggleMotion.init();</span><br><span class="line">    integrator.next();</span><br><span class="line">    // 可以不加if直接显示</span><br><span class="line">    // 加if的话，要在主题配置文件里面修改 sidebar: always</span><br><span class="line">    if (CONFIG.sidebar === &apos;always&apos;) &#123;</span><br><span class="line">       // 模拟点击一下侧边栏按钮</span><br><span class="line">       sidebarToggleMotion.clickHandler();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>哈哈，边框栏可以自动展开啦！开心</p>

            
          </span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                <a class="post-title-link" href="/2016/05/04/PHP-MySql-Apache-WordPress/" itemprop="url">
                  PHP+MySql+Apache+WordPress Win10 配置
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            发表于
            <time itemprop="dateCreated" datetime="2016-05-04T22:48:32+08:00" content="2016-05-04">
              2016-05-04
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp; 分类于
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/搭建环境/" itemprop="url" rel="index">
                    <span itemprop="name">搭建环境</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

        </div>
      </header>
    


    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody">
            
              <p>闲话少说，首先是安装，但是版本的选择很重要。</p>
<h2 id="PHP-5-6"><a href="#PHP-5-6" class="headerlink" title="PHP 5.6"></a>PHP 5.6</h2><p>当然是<a href="&quot;http://php.net/downloads.php&quot;">官网</a>啦！</p>
<p><img src="/images/amps1.png" alt="“php1”"></p>
<p>这里选择5.6的版本，PHP 7太新了，怕兼容性出现问题。点击<a href="&quot;http://windows.php.net/download#php-5.6&quot;">Windows downloads</a></p>
<p>版本有Thread Safe/Non Thread Safe 和 X86 X64的两种组合，随自己的喜欢了。Non Thread Safe不会检查线程是否安全。这里下载的是Zip格式的压缩包</p>
<p><img src="/images/amps2.png" alt="“php2”"></p>
<p>解压缩，我的路径是 F:\php5.6 复制份php.ini-development，并改名为PHP.ini，用记事本打开</p>
<p>查找 extension_dir 将</p>
<pre><code>;extension=php_mysql.dll
;extension=php_mysqli.dll
</code></pre><p>前面的注释符”;”去掉，使PHP支持mysql</p>
<h2 id="Apache-2-4"><a href="#Apache-2-4" class="headerlink" title="Apache 2.4"></a>Apache 2.4</h2><p>点<a href="&quot;http://httpd.apache.org/download.cgi&quot;">这里</a>下载！这里选择2.4版本，因为和PHP 5.6一样都是在vc11下编译的</p>
<p><img src="/images/amps3.png" alt="“apache1”"></p>
<p>点击 Files for Microsoft Windows，这里有五个版本，第一项ApacheHaus是个第三方下载平台，在它的网站下载独立的Apache压缩包。另外四个中，第二个也是独立的Apache下载地址，另外三个是集成开发环境。这里直接选择了第一个</p>
<p><img src="/images/amps4.png" alt="“apache2”"></p>
<p>解压缩，我的路径是 F:\Apache24 接下来的工作就是比较主要的了，配置 httpd.conf</p>
<ul>
<li>修改监听端口</li>
</ul>
<p>如果原有80端口被其他服务占用，可以修改 <code>Listen 80</code> 为 <code>Listen 8081</code> (例如)</p>
<ul>
<li>修改权限</li>
</ul>
<p>apache 2.4 不再支持deny/allow 等指令，改用 denied/granted，将denied改为granted，或者注释掉重写。<br>否则会出现的一个问题是 <code>You don’t have permission to access / on this server</code><br>如果根目录下没有index文件，也会出现这个问题</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;Directory /&gt;</span><br><span class="line">    AllowOverride none</span><br><span class="line">    # Require all denied</span><br><span class="line">	Require all granted</span><br><span class="line">&lt;/Directory&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li>修改站点根目录</li>
</ul>
<p><code>DocumentRoot &quot;${SRVROOT}/htdocs&quot;</code> 改为自己的目录<br>例如我的 <code>DocumentRoot &quot;D:/PHPWeb&quot;</code></p>
<ul>
<li>支持PHP</li>
</ul>
<p>在配置文件最后添加以下代码，配置php的module 和 php.ini 的路径</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># php5 support</span><br><span class="line">LoadModule php5_module &quot;F:/php5.6/php5apache2_4.dll&quot;</span><br><span class="line">AddHandler application/x-httpd-php .php</span><br><span class="line"># configure the path to php.ini</span><br><span class="line">PHPIniDir &quot;F:/php5.6&quot;</span><br></pre></td></tr></table></figure>
<ul>
<li>启动Apache</li>
</ul>
<p>在bin目录下执行httpd.exe，正常情况就是没有信息返回</p>
<p><img src="/images/amps5.png" alt="“apache3”"></p>
<p>在 <code>D:/PHPWeb</code> 内新建 <code>index.php</code>, 内容填入以下PHP代码</p>
<pre><code>&lt;?php Echo &quot;Hello, CJW!&quot;;?&gt;
</code></pre><p>此时可以在浏览器输入localhost:8081/index.php，可以看到打印的结果，此时PHP+Apache已经搭建好</p>
<p><img src="/images/amps6.png" alt="“apache4”"></p>
<h2 id="WordPress"><a href="#WordPress" class="headerlink" title="WordPress"></a>WordPress</h2><p>点<a href="&quot;https://wordpress.org/download/&quot;">这里</a>下载，我选择zip版本，然后解压缩</p>
<p><a href="&quot;http://codex.wordpress.org.cn/&quot;">官网教程</a>写的也比较清楚，主要有几个步骤需要注意</p>
<ul>
<li>上传WordPress到一个远程主机</li>
</ul>
<p>教程里说的这一步，可以把zip解压到根目录里，例如我的 <code>&quot;D:\PHPWeb\wordpress&quot;</code></p>
<ul>
<li>设置 wp-config.php</li>
</ul>
<p>将 wp-config-sample.php 改名为 wp-config.php，然后就是配置数据库，教程里写的很清楚。</p>
<ul>
<li>测试</li>
</ul>
<p>在浏览器里输入 <code>http://localhost:8081/wordpress/</code> 进行测试，第一次访问是注册界面</p>
<p>如果出现 <code>You don’t have permission to access / on this server</code> 检查Apache配置，或者看是否缺少index文件</p>
<p><img src="/images/amps7.png" alt="“wp”"></p>
<h2 id="MySql-5-6"><a href="#MySql-5-6" class="headerlink" title="MySql 5.6"></a>MySql 5.6</h2><p>安装过程基本一路next，注意填入的用户名和密码要记住，在wp-config.php配置时需要填入</p>

            
          </span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                <a class="post-title-link" href="/2016/05/03/SICP-ex2-2(4)/" itemprop="url">
                  SICP 2.2节习题(4)
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            发表于
            <time itemprop="dateCreated" datetime="2016-05-03T18:36:52+08:00" content="2016-05-03">
              2016-05-03
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp; 分类于
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/SICP解题集/" itemprop="url" rel="index">
                    <span itemprop="name">SICP解题集</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

        </div>
      </header>
    


    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody">
            
              <h1 id="第二章-构造数据抽象"><a href="#第二章-构造数据抽象" class="headerlink" title="第二章 构造数据抽象"></a>第二章 构造数据抽象</h1><h2 id="2-2-层次性数据和闭包性质"><a href="#2-2-层次性数据和闭包性质" class="headerlink" title="2.2 层次性数据和闭包性质"></a>2.2 层次性数据和闭包性质</h2><p>书中P82页，嵌套映射部分</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">;二元组</span><br><span class="line">(define (flatmap proc seq)</span><br><span class="line">  (accumulate append &apos;() (map proc seq)))</span><br><span class="line">(define (prime-sum? pair)</span><br><span class="line">  (prime? (+ (car pair) (cadr pair))))</span><br><span class="line">(define (make-pair-sum pair)</span><br><span class="line">  (list (car pair) (cadr pair) (+ (car pair) (cadr pair))))</span><br><span class="line"></span><br><span class="line">(define (prime-sum-pairs n)</span><br><span class="line">  (map make-pair-sum</span><br><span class="line">       (filter prime-sum?</span><br><span class="line">               (flatmap</span><br><span class="line">                (lambda (i)</span><br><span class="line">                  (map (lambda (j) (list i j))</span><br><span class="line">                       (enumerate-interval 1 (- i 1))))</span><br><span class="line">                (enumerate-interval 1 n)))))</span><br></pre></td></tr></table></figure>
<p>P33页判断是否为素数</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">;P33 prime?</span><br><span class="line">(define (prime? n)</span><br><span class="line">	(define (smallest-divisor n)</span><br><span class="line">		(find-divisor n 2))</span><br><span class="line">	(define (find-divisor n test-divisor)</span><br><span class="line">		(cond ((&gt; (square test-divisor) n) n)</span><br><span class="line">			  ((divides? test-divisor n) test-divisor)</span><br><span class="line">			  (else (find-divisor n (+ test-divisor 1)))))</span><br><span class="line">	(define (divides? a b)</span><br><span class="line">		(= (remainder b a) 0))</span><br><span class="line">	(= n (smallest-divisor n)))</span><br><span class="line"></span><br><span class="line">(define (permutations s)</span><br><span class="line">  (if (null? s)</span><br><span class="line">      (list &apos;())</span><br><span class="line">      (flatmap (lambda (x)</span><br><span class="line">                 (map (lambda (p) (cons x p))</span><br><span class="line">                      (permutations (remove x s))))</span><br><span class="line">               s)))</span><br><span class="line">(define (remove item seq)</span><br><span class="line">  (filter (lambda (x) (not (= x item)))</span><br><span class="line">          seq))</span><br></pre></td></tr></table></figure>
<h3 id="EX-2-40"><a href="#EX-2-40" class="headerlink" title="EX 2.40"></a>EX 2.40</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">(define (unique-pairs n)</span><br><span class="line">  (flatmap</span><br><span class="line">   (lambda (i)</span><br><span class="line">     (map (lambda (j) (list i j))</span><br><span class="line">          (enumerate-interval 1 (- i 1))))</span><br><span class="line">   (enumerate-interval 1 n)))</span><br><span class="line">(define (new-prime-sum-pairs n)</span><br><span class="line">  (map make-pair-sum</span><br><span class="line">       (filter prime-sum? (unique-pairs n))))</span><br></pre></td></tr></table></figure>
<h3 id="EX-2-41"><a href="#EX-2-41" class="headerlink" title="EX 2.41"></a>EX 2.41</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">(define (sum-equal-s? triple s)</span><br><span class="line">  (= s (+ (car triple) (cadr triple) (caddr triple))))</span><br><span class="line">(define (make-triple n)</span><br><span class="line">  (flatmap</span><br><span class="line">   (lambda (i)</span><br><span class="line">     (map (lambda (j) (cons i j))</span><br><span class="line">          (unique-pairs (- i 1))))</span><br><span class="line">   (enumerate-interval 1 n)))</span><br><span class="line">(define (remove-not-equal triple s)</span><br><span class="line">  (filter (lambda (pre-triple)</span><br><span class="line">            (sum-equal-s? pre-triple s))</span><br><span class="line">          triple))</span><br><span class="line">(define (2-41 n s)</span><br><span class="line">  (remove-not-equal (make-triple n) s))</span><br></pre></td></tr></table></figure>
<h3 id="EX-2-42"><a href="#EX-2-42" class="headerlink" title="EX 2.42"></a>EX 2.42</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">(define (queens board-size)</span><br><span class="line">  (define (queen-cols k)  ;第k列</span><br><span class="line">    (if (= k 0)</span><br><span class="line">        (list empty-board)</span><br><span class="line">        (filter</span><br><span class="line">         (lambda (positions) (safe? k positions))</span><br><span class="line">         (flatmap</span><br><span class="line">          (lambda (rest-of-queens)</span><br><span class="line">            (map (lambda (new-row)</span><br><span class="line">                   (adjoin-position new-row k rest-of-queens))</span><br><span class="line">                 (enumerate-interval 1 board-size)))</span><br><span class="line">          (queen-cols (- k 1))))))</span><br><span class="line">  (queen-cols board-size))</span><br><span class="line"></span><br><span class="line">(define empty-board &apos;())</span><br><span class="line">(define (adjoin-position new-row k rest)</span><br><span class="line">  (cons new-row rest))</span><br><span class="line">(define (safe? k position)</span><br><span class="line">    (iter-check (car position) </span><br><span class="line">                (cdr position)</span><br><span class="line">                 1))</span><br><span class="line"></span><br><span class="line">(define (iter-check row-of-new-queen rest-of-queens i)</span><br><span class="line">    (if (null? rest-of-queens)  ; 下方所有皇后检查完毕,新皇后安全</span><br><span class="line">        #t</span><br><span class="line">        (let ((row-of-current-queen (car rest-of-queens)))</span><br><span class="line">            (if (or (= row-of-new-queen row-of-current-queen)           ; 行碰撞</span><br><span class="line">                    (= row-of-new-queen (+ i row-of-current-queen))     ; 右下方碰撞</span><br><span class="line">                    (= row-of-new-queen (- row-of-current-queen i)))    ; 左下方碰撞</span><br><span class="line">                #f</span><br><span class="line">                (iter-check row-of-new-queen </span><br><span class="line">                            (cdr rest-of-queens)    ; 继续检查剩余的皇后</span><br><span class="line">                            (+ i 1))))))            ; 更新步进值</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">;测试程序</span><br><span class="line">(define testQueens</span><br><span class="line">  (for-each (lambda (pos)</span><br><span class="line">                    (begin</span><br><span class="line">                        (display pos)</span><br><span class="line">                        (newline)))</span><br><span class="line">                (queens 8)))</span><br></pre></td></tr></table></figure>
            
          </span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                <a class="post-title-link" href="/2016/04/28/SICP-ex2-2(3)/" itemprop="url">
                  SICP 2.2节习题(3)
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            发表于
            <time itemprop="dateCreated" datetime="2016-04-28T20:08:11+08:00" content="2016-04-28">
              2016-04-28
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp; 分类于
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/SICP解题集/" itemprop="url" rel="index">
                    <span itemprop="name">SICP解题集</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

        </div>
      </header>
    


    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody">
            
              <h1 id="第二章-构造数据抽象"><a href="#第二章-构造数据抽象" class="headerlink" title="第二章 构造数据抽象"></a>第二章 构造数据抽象</h1><h2 id="2-2-层次性数据和闭包性质"><a href="#2-2-层次性数据和闭包性质" class="headerlink" title="2.2 层次性数据和闭包性质"></a>2.2 层次性数据和闭包性质</h2><h3 id="EX-2-33"><a href="#EX-2-33" class="headerlink" title="EX 2.33"></a>EX 2.33</h3><p>accumulate中参数op是二元操作<br>lambda (x y) 中，x:(car seq) y:(accumulate op init (cdr seq))</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">;原始map定义</span><br><span class="line">(define (map proc items)</span><br><span class="line">  (if (null? items)</span><br><span class="line">      &apos;()</span><br><span class="line">      (cons (proc (car items))</span><br><span class="line">            (map proc (cdr items)))))</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">;用accumulate定义</span><br><span class="line">(define (map1 p sequence)</span><br><span class="line">  (accumulate (lambda (x y) (cons (p x) y)) &apos;() sequence))</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">;原始append定义</span><br><span class="line">(define (append list1 list2)</span><br><span class="line">  (if (null? list1)</span><br><span class="line">      list2</span><br><span class="line">      (cons (car list1) (append (cdr list1) list2))))</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">;用accumulate定义</span><br><span class="line">(define (append1 seq1 seq2)</span><br><span class="line">  (accumulate cons seq2 seq1))</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">;原始length定义</span><br><span class="line">(define (length items)</span><br><span class="line">  (define (length-iter a count)</span><br><span class="line">    (if (null? a)</span><br><span class="line">        count</span><br><span class="line">        (length-iter (cdr a) (+ 1 count)))))</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">;用accumulate定义</span><br><span class="line">(define (length1 sequence)</span><br><span class="line">  (accumulate (lambda (x y) (+ y 1)) 0 sequence))</span><br></pre></td></tr></table></figure>
<h3 id="EX-2-34"><a href="#EX-2-34" class="headerlink" title="EX 2.34"></a>EX 2.34</h3><p>主要是采用Horner规则将多项式变形</p>
<p><img src="/images/ex2-34.jpg" alt="“ex2-34”"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">(define (horner-eval x coefficient-sequence)</span><br><span class="line">  (accumulate (lambda (this-coeff higher-terms) (+ this-coeff (* higher-terms x)))</span><br><span class="line">              0</span><br><span class="line">              coefficient-sequence))</span><br></pre></td></tr></table></figure>
<h3 id="EX-2-35"><a href="#EX-2-35" class="headerlink" title="EX 2.35"></a>EX 2.35</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">;原始count-leaves定义</span><br><span class="line">(define (count-leaves t)</span><br><span class="line">  (cond ((null? t) 0)</span><br><span class="line">        ((not (pair? t)) 1)</span><br><span class="line">        (else (+ (count-leaves (car t))</span><br><span class="line">                 (count-leaves (cdr t))))))</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">;用accumulate定义</span><br><span class="line">;map计算每一个结点的叶子数量,得到如(0 0 1 1 ......)的list，再累积便可</span><br><span class="line">(define (count-leaves1 t)</span><br><span class="line">  (accumulate + 0 (map</span><br><span class="line">                   (lambda (x)</span><br><span class="line">                     (if (pair? x)</span><br><span class="line">                         (count-leaves1 x)</span><br><span class="line">                         1))</span><br><span class="line">                     t)))</span><br></pre></td></tr></table></figure>
<h3 id="EX-2-36"><a href="#EX-2-36" class="headerlink" title="EX 2.36"></a>EX 2.36</h3><p>重点在于如何得到每一个内部序列的第一个元素，于是map一次seqs，对每个内部序列都得到其car</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">(define (accumulate-n op init seqs)</span><br><span class="line">  (if (null? (car seqs))</span><br><span class="line">      &apos;()</span><br><span class="line">      (cons (accumulate op init (map car seqs))</span><br><span class="line">            (accumulate-n op init (map cdr seqs)))))</span><br></pre></td></tr></table></figure>
<h3 id="EX-2-37"><a href="#EX-2-37" class="headerlink" title="EX 2.37"></a>EX 2.37</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">;测试程序 矩阵1、2 向量1、2</span><br><span class="line">(define test-matrix1 (list (list 1 2 3 4) (list 4 5 6 6) (list 6 7 8 9)))</span><br><span class="line">(define test-matrix2 (list (list 1 4 6) (list 2 5 7) (list 3 6 8) (list 4 6 9)))</span><br><span class="line">(define test-vector1 (list 1 2 3 4))</span><br><span class="line">(define test-vector2 (list 4 5 6 6))</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">;求点积</span><br><span class="line">(define (dot-product v w)</span><br><span class="line">  (accumulate + 0 (map * v w)))</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">;矩阵乘向量，(矩阵列数 = 向量行数) 用map对每一行做点积</span><br><span class="line">(define (matrix-*-vector m v)</span><br><span class="line">  (map (lambda (row)</span><br><span class="line">         (dot-product row v))</span><br><span class="line">         m))</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">;求转置矩阵</span><br><span class="line">(define (transpose mat)</span><br><span class="line">  (accumulate-n cons &apos;() mat))</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">;矩阵相乘</span><br><span class="line">(define (matrix-*-matrix m n)</span><br><span class="line">  (let ((cols (transpose n)))</span><br><span class="line">    (map (lambda (row)</span><br><span class="line">           (map (lambda (col)</span><br><span class="line">                  (dot-product row col))</span><br><span class="line">                cols))</span><br><span class="line">         m)))</span><br></pre></td></tr></table></figure>
<h3 id="EX-2-38"><a href="#EX-2-38" class="headerlink" title="EX 2.38"></a>EX 2.38</h3><p>书中fold-left过程如下</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">(define (fold-left op initial sequence)</span><br><span class="line">  (define (iter result rest)</span><br><span class="line">    (if (null? rest)</span><br><span class="line">        result</span><br><span class="line">        (iter (op result (car rest))</span><br><span class="line">              (cdr rest))))</span><br><span class="line">  (iter initial sequence))</span><br></pre></td></tr></table></figure>
<p>从右向左对元素使用op操作，类似于accumulate</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">(define (fold-right op initial sequence)</span><br><span class="line">  (if (null? sequence)</span><br><span class="line">      initial</span><br><span class="line">      (op (car sequence)</span><br><span class="line">          (accumulate op initial (cdr sequence)))))</span><br></pre></td></tr></table></figure>
<p>由几个例子可以看出，加法、乘法等满足结合律的op，对任何序列可以产生同样的结果</p>
<h3 id="EX-2-39"><a href="#EX-2-39" class="headerlink" title="EX 2.39"></a>EX 2.39</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">;原始reverse</span><br><span class="line">(define (reverse x)</span><br><span class="line">  (define (iter remain result)</span><br><span class="line">    (if (null? remain)</span><br><span class="line">        result</span><br><span class="line">        (iter (cdr remain) (cons (car remain) result))))</span><br><span class="line">  (iter x &apos;()))</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">(define (reverse1 sequence)</span><br><span class="line">  (fold-right (lambda (x y) (append y (list x))) &apos;() sequence))</span><br><span class="line">(define (reverse2 sequence)</span><br><span class="line">  (fold-left (lambda (x y) (cons y x)) &apos;() sequence))</span><br></pre></td></tr></table></figure>
            
          </span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                <a class="post-title-link" href="/2016/04/21/SICP-ex2-2(2)/" itemprop="url">
                  SICP 2.2节习题(2)
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            发表于
            <time itemprop="dateCreated" datetime="2016-04-21T21:01:07+08:00" content="2016-04-21">
              2016-04-21
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp; 分类于
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/SICP解题集/" itemprop="url" rel="index">
                    <span itemprop="name">SICP解题集</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

        </div>
      </header>
    


    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody">
            
              <h1 id="第二章-构造数据抽象"><a href="#第二章-构造数据抽象" class="headerlink" title="第二章 构造数据抽象"></a>第二章 构造数据抽象</h1><h2 id="2-2-层次性数据和闭包性质"><a href="#2-2-层次性数据和闭包性质" class="headerlink" title="2.2 层次性数据和闭包性质"></a>2.2 层次性数据和闭包性质</h2><h3 id="EX-2-24"><a href="#EX-2-24" class="headerlink" title="EX 2.24"></a>EX 2.24</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(define 2-24 (list 1 (list 2 (list 3 4))))</span><br></pre></td></tr></table></figure>
<p>解释器打印出：</p>
<pre><code>(1 (2 (3 4)))
</code></pre><p>盒子指针结构：</p>
<p><img src="/images/ex2-24.jpg" alt="“ex2-24”"></p>
<h3 id="EX-2-25"><a href="#EX-2-25" class="headerlink" title="EX 2.25"></a>EX 2.25</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">(define a1 (list 1 3 (cons 5 7) 9))</span><br><span class="line">(define 2-25-1</span><br><span class="line">  (cdr (car (cdr (cdr a1)))))	;(cdr (car (cdr (cdr a1)))) 等价于 (cdaddr a1)</span><br><span class="line"></span><br><span class="line">(define a2 (list (list 7)))</span><br><span class="line">(define 2-25-2</span><br><span class="line">  (car (car a2)))	;(car (car a2)) 等价于 (caar a2)</span><br><span class="line"></span><br><span class="line">(define a3 (list 1 (list 2 (list 3 (list 4 (list 5 (list 6 7)))))))</span><br><span class="line">(define 2-25-3</span><br><span class="line">  (car (cdr (car (cdr (car (cdr (car (cdr (car (cdr (car (cdr a3)))))))))))))	;等价于 (cadadr (cadadr (cadadr a3)))</span><br></pre></td></tr></table></figure>
<h3 id="EX-2-26"><a href="#EX-2-26" class="headerlink" title="EX 2.26"></a>EX 2.26</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">(define x (list 1 2 3))</span><br><span class="line">(define y (list 4 5 6))</span><br></pre></td></tr></table></figure>
<p>打印结果如下：</p>
<pre><code>(append x y) -&gt; (1 2 3 4 5 6)
(cons x y) -&gt; ((1 2 3) 4 5 6)
(list x y) -&gt; ((1 2 3) (4 5 6))
</code></pre><h3 id="EX-2-27"><a href="#EX-2-27" class="headerlink" title="EX 2.27"></a>EX 2.27</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">;原始reverse</span><br><span class="line">(define (reverse x)</span><br><span class="line">  (define (iter rest result)</span><br><span class="line">    (if (null? rest)</span><br><span class="line">        result</span><br><span class="line">        (iter (cdr rest) (cons (car rest) result))))</span><br><span class="line">  (iter x &apos;()))</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">;处理二叉树、三叉树等,如(list (list 2 1) (list 4 3) (list 6 5))</span><br><span class="line">(define (deep-reverse x)</span><br><span class="line">  (define (iter rest result)</span><br><span class="line">    (if (null? rest)</span><br><span class="line">        result</span><br><span class="line">        (iter (cdr rest)</span><br><span class="line">              (cons (if (pair? (car rest))</span><br><span class="line">                        (deep-reverse (car rest))</span><br><span class="line">                        (car rest))</span><br><span class="line">                    result))))</span><br><span class="line">  (iter x &apos;()))</span><br><span class="line"></span><br><span class="line">;一种更好的算法</span><br><span class="line">(define (better-deep-reverse x)</span><br><span class="line">  (if (pair? x)</span><br><span class="line">      (reverse (map better-deep-reverse x))</span><br><span class="line">      x))</span><br></pre></td></tr></table></figure>
<h3 id="EX-2-28"><a href="#EX-2-28" class="headerlink" title="EX 2.28"></a>EX 2.28</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">(define (fringe x)</span><br><span class="line">  (cond ((null? x) &apos;())</span><br><span class="line">        ((not (pair? x)) (list x))</span><br><span class="line">        (else (append (fringe (car x))	    ;left branch</span><br><span class="line">                      (fringe (cdr x))))))	;right branch</span><br></pre></td></tr></table></figure>
<h3 id="EX-2-29"><a href="#EX-2-29" class="headerlink" title="EX 2.29"></a>EX 2.29</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">;原始构造函数</span><br><span class="line">(define (make-mobile left right)</span><br><span class="line">  (list left right))</span><br><span class="line">(define (make-branch length structure)</span><br><span class="line">  (list length structure))</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">;测试程序</span><br><span class="line">(define lfbran (make-branch 1 2))</span><br><span class="line">(define rtbran (make-branch 2 (make-mobile (make-branch 3 4) (make-branch 5 6))))</span><br><span class="line">(define test-mobile (make-mobile lfbran rtbran))</span><br></pre></td></tr></table></figure>
<h4 id="a-根据原始构造函数，不难写出选择函数"><a href="#a-根据原始构造函数，不难写出选择函数" class="headerlink" title="a) 根据原始构造函数，不难写出选择函数"></a>a) 根据原始构造函数，不难写出选择函数</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">(define (left-branch mobile)</span><br><span class="line">  (car mobile))</span><br><span class="line">(define (right-branch mobile)</span><br><span class="line">  (cadr mobile))</span><br><span class="line">(define (branch-length branch)</span><br><span class="line">  (car branch))</span><br><span class="line">(define (branch-structure branch)</span><br><span class="line">  (cadr branch))</span><br></pre></td></tr></table></figure>
<h4 id="b-total-weight-计算活动体总重量，递归地求和左右分支的总重量"><a href="#b-total-weight-计算活动体总重量，递归地求和左右分支的总重量" class="headerlink" title="b) total-weight 计算活动体总重量，递归地求和左右分支的总重量"></a>b) total-weight 计算活动体总重量，递归地求和左右分支的总重量</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">(define (total-weight mobile)</span><br><span class="line">  (+ (branch-weight (left-branch mobile))</span><br><span class="line">     (branch-weight (right-branch mobile))))</span><br><span class="line"></span><br><span class="line">(define (branch-weight branch)  ;计算分支重量</span><br><span class="line">  (if (pair? (branch-structure branch))  ;是否吊着活动体</span><br><span class="line">      (total-weight (branch-structure branch))</span><br><span class="line">      (branch-structure branch)))</span><br></pre></td></tr></table></figure>
<h4 id="c-check-balance-检查二叉活动体是否平衡，递归判断左右分支是否平衡"><a href="#c-check-balance-检查二叉活动体是否平衡，递归判断左右分支是否平衡" class="headerlink" title="c) check-balance 检查二叉活动体是否平衡，递归判断左右分支是否平衡"></a>c) check-balance 检查二叉活动体是否平衡，递归判断左右分支是否平衡</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">(define (cal-torque branch)  ;计算分支力矩</span><br><span class="line">  (* (branch-length branch) (branch-weight branch)))</span><br><span class="line"></span><br><span class="line">(define (check-balance mobile)</span><br><span class="line">  (if (null? mobile)</span><br><span class="line">      #t</span><br><span class="line">      (let ((left (left-branch mobile))</span><br><span class="line">            (right (right-branch mobile)))</span><br><span class="line">        (and (torque-equal? left right)</span><br><span class="line">             (branch-balance? left)</span><br><span class="line">             (branch-balance? right)))))</span><br><span class="line"></span><br><span class="line">(define (torque-equal? lfbranch rtbranch)  ;力矩是否相等</span><br><span class="line">  (= (cal-torque lfbranch) (cal-torque rtbranch)))</span><br><span class="line"></span><br><span class="line">(define (branch-balance? branch)  ;分支是否平衡</span><br><span class="line">  (if (pair? (branch-structure branch))  ;是否吊着活动体</span><br><span class="line">      (check-balance (branch-structure branch))</span><br><span class="line">      #t))</span><br></pre></td></tr></table></figure>
<h4 id="d-这就是数据抽象的好处-改变构造方式-我们只需要修改相应的选择函数"><a href="#d-这就是数据抽象的好处-改变构造方式-我们只需要修改相应的选择函数" class="headerlink" title="d) 这就是数据抽象的好处,改变构造方式,我们只需要修改相应的选择函数"></a>d) 这就是数据抽象的好处,改变构造方式,我们只需要修改相应的选择函数</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">(define (new-left-branch mobile)</span><br><span class="line">  (car mobile))</span><br><span class="line">(define (new-right-branch mobile)</span><br><span class="line">  (cdr mobile))</span><br><span class="line">(define (new-branch-length branch)</span><br><span class="line">  (car branch))</span><br><span class="line">(define (new-branch-structure branch)</span><br><span class="line">  (cdr branch))</span><br></pre></td></tr></table></figure>
<h3 id="EX-2-30"><a href="#EX-2-30" class="headerlink" title="EX 2.30"></a>EX 2.30</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">;直接定义</span><br><span class="line">(define (square-tree1 tree)</span><br><span class="line">  (cond ((null? tree) &apos;())</span><br><span class="line">        ((not (pair? tree)) (square tree))</span><br><span class="line">        (else (cons (square-tree1 (car tree))</span><br><span class="line">                    (square-tree1 (cdr tree))))))</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">;map和递归定义</span><br><span class="line">(define (square-tree2 tree)</span><br><span class="line">  (map (lambda (sub-tree)</span><br><span class="line">         (if (pair? sub-tree)</span><br><span class="line">             (square-tree2 sub-tree)</span><br><span class="line">             (square sub-tree)))</span><br><span class="line">       tree))</span><br></pre></td></tr></table></figure>
<h3 id="EX-2-31"><a href="#EX-2-31" class="headerlink" title="EX 2.31"></a>EX 2.31</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">(define (tree-map proc items)</span><br><span class="line">  (cond ((null? items) &apos;())</span><br><span class="line">        ((not (pair? items)) (proc items))</span><br><span class="line">        (else (cons (tree-map proc (car items))</span><br><span class="line">                    (tree-map proc (cdr items))))))</span><br><span class="line">(define (square-tree3 tree)</span><br><span class="line">  (tree-map square tree))</span><br></pre></td></tr></table></figure>
<h3 id="EX-2-32"><a href="#EX-2-32" class="headerlink" title="EX 2.32"></a>EX 2.32</h3><p>求集合S的子集，就是求(cdr S)和(cdr S)里的每个元素append (car S)<br>例如S：(list 1 2 3)，子集是(() (3) (2) (2 3) (1) (1 3) (1 2) (1 2 3))<br>先求(2 3)的子集，(() (3) (2) (2 3))，然后给每个append 1<br>具体递归分析如下：</p>
<p><img src="/images/ex2-32.jpg" alt="“ex2-32”"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">(define (subsets s)</span><br><span class="line">  (if (null? s)</span><br><span class="line">      (list &apos;())</span><br><span class="line">      (let ((rest (subsets (cdr s))))</span><br><span class="line">        (append rest (map (lambda (x) (cons (car s) x))</span><br><span class="line">                           rest)))))</span><br></pre></td></tr></table></figure>
            
          </span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                <a class="post-title-link" href="/2016/04/21/SICP-ex2-2(1)/" itemprop="url">
                  SICP 2.2节习题(1)
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            发表于
            <time itemprop="dateCreated" datetime="2016-04-21T20:11:25+08:00" content="2016-04-21">
              2016-04-21
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp; 分类于
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/SICP解题集/" itemprop="url" rel="index">
                    <span itemprop="name">SICP解题集</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

        </div>
      </header>
    


    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody">
            
              <h1 id="第二章-构造数据抽象"><a href="#第二章-构造数据抽象" class="headerlink" title="第二章 构造数据抽象"></a>第二章 构造数据抽象</h1><h2 id="2-2-层次性数据和闭包性质"><a href="#2-2-层次性数据和闭包性质" class="headerlink" title="2.2 层次性数据和闭包性质"></a>2.2 层次性数据和闭包性质</h2><h3 id="EX-2-17"><a href="#EX-2-17" class="headerlink" title="EX 2.17"></a>EX 2.17</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">;返回列表尾元素</span><br><span class="line">(define (last-pair x)</span><br><span class="line">  (if (null? (cdr x))</span><br><span class="line">      x</span><br><span class="line">      (last-pair (cdr x))))</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">;测试</span><br><span class="line">(last-pair (list 1 2 3 4))</span><br></pre></td></tr></table></figure>
<h3 id="EX-2-18"><a href="#EX-2-18" class="headerlink" title="EX 2.18"></a>EX 2.18</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">;反转列表</span><br><span class="line">(define (reverse x)</span><br><span class="line">  (define (iter remain result)</span><br><span class="line">    (if (null? remain)</span><br><span class="line">        result</span><br><span class="line">        (iter (cdr remain) (cons (car remain) result))))</span><br><span class="line">  (iter x &apos;()))</span><br></pre></td></tr></table></figure>
<h3 id="EX-2-19"><a href="#EX-2-19" class="headerlink" title="EX 2.19"></a>EX 2.19</h3><p>题目本身并不难，只要看过“换零钱”的程序，根据分治思想，分成使用的币种和为未使用的币种，两部分分别是list的car和cdr</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">;源程序</span><br><span class="line">(define (cc amount coin-values)</span><br><span class="line">  (cond ((= amount 0) 1)</span><br><span class="line">        ((or (&lt; amount 0) (no-more? coin-values)) 0)</span><br><span class="line">        (else (+ (cc amount (except-first-denomination coin-values))</span><br><span class="line">                 (cc (- amount (first-denomination coin-values)) coin-values)))))</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">;补全程序</span><br><span class="line">(define (first-denomination coin-values)</span><br><span class="line">  (car coin-values))</span><br><span class="line">(define (except-first-denomination coin-values)</span><br><span class="line">  (cdr coin-values))</span><br><span class="line">(define (no-more? coin-values)</span><br><span class="line">  (null? coin-values))</span><br></pre></td></tr></table></figure>
<h3 id="EX-2-20"><a href="#EX-2-20" class="headerlink" title="EX 2.20"></a>EX 2.20</h3><p>一般的思路是利用循环遍历列表，逐个判断元素的奇偶性，当该项符合要求时加入新的list中<br>这里的思路是抽象出一种通用的过程filter，体现了动态语言的特性，将过程(函数)作为参数传递</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">;P78 filter的定义</span><br><span class="line">(define (filter predicate sequence)</span><br><span class="line">  (cond ((null? sequence) &apos;())</span><br><span class="line">        ((predicate (car sequence))</span><br><span class="line">         (cons (car sequence) (filter predicate (cdr sequence))))</span><br><span class="line">        (else (filter predicate (cdr sequence)))))</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">;一种same-parity  </span><br><span class="line">(define (same-parity x . y)</span><br><span class="line">  (cond ((odd? x) (filter odd? (cons x y)))</span><br><span class="line">        ((even? x) (filter even? (cons x y)))</span><br><span class="line">        (else (display &quot;x error&quot;))))</span><br><span class="line"></span><br><span class="line">;一种same-parity的简洁定义</span><br><span class="line">(define (same-parity x . y)</span><br><span class="line">  (filter (if (odd? x)</span><br><span class="line">              odd?</span><br><span class="line">              even?)</span><br><span class="line">          (cons x y)))</span><br></pre></td></tr></table></figure>
<h3 id="EX-2-21"><a href="#EX-2-21" class="headerlink" title="EX 2.21"></a>EX 2.21</h3><p>不难补全代码<br>第一种定义：对car项做平方，cdr项继续迭代回过程中<br>第二种定义：根据map的定义，形式参数是操作类型和被操作的项即可</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">;一种square-list的定义</span><br><span class="line">(define (square-list1 items)</span><br><span class="line">  (if (null? items)</span><br><span class="line">      &apos;()</span><br><span class="line">      (cons (square (car items))</span><br><span class="line">            (square-list1 (cdr items)))))</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">;另一种square-list的定义</span><br><span class="line">(define (square-list2 items)</span><br><span class="line">  (map square items))</span><br></pre></td></tr></table></figure>
<h3 id="EX-2-22"><a href="#EX-2-22" class="headerlink" title="EX 2.22"></a>EX 2.22</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">;原始程序(未交换cons参数)</span><br><span class="line">(define (square-list items)</span><br><span class="line">  (define (iter things answer)</span><br><span class="line">    (if (null? things)</span><br><span class="line">        answer</span><br><span class="line">        (iter (cdr things)</span><br><span class="line">              (cons (square (car things))</span><br><span class="line">                    answer))))</span><br><span class="line">  (iter items &apos;()))</span><br></pre></td></tr></table></figure>
<p>分析如下：</p>
<pre><code>(square-list (list 1 2 3))                    -&gt;
(iter (1 2 3) &apos;())                            -&gt;
(iter (2 3) (cons 1 &apos;()))                    -&gt;
(iter (3) (cons 4 (cons 1 &apos;())))            -&gt;
(iter &apos;() (cons 9 (cons 4 (cons 1 &apos;()))))    -&gt;    (cons 9 (cons 4 (cons 1 &apos;())))) = (list 9 4 1)
(9 4 1)
</code></pre><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">;原始程序(交换cons参数)</span><br><span class="line">(define (square-list items)</span><br><span class="line">  (define (iter things answer)</span><br><span class="line">    (if (null? things)</span><br><span class="line">        answer</span><br><span class="line">        (iter (cdr things)</span><br><span class="line">              (cons answer</span><br><span class="line">                    (square (car things))))))</span><br><span class="line">  (iter items &apos;()))</span><br></pre></td></tr></table></figure>
<p>分析如下：</p>
<pre><code>(square-list (list 1 2 3))                    -&gt;
(iter (1 2 3) &apos;())                             -&gt;
(iter (2 3) (cons &apos;() 1))                    -&gt;
(iter (3) (cons (cons &apos;() 1) 4))            -&gt;
(iter &apos;() (cons (cons (cons &apos;() 1) 4) 3))    -&gt;    (cons (cons (cons &apos;() 1) 4) 3) = (((() . 1) . 4) . 9)
(((() . 1) . 4) . 9)
</code></pre><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">;正确程序</span><br><span class="line">(define (square-list items)</span><br><span class="line">  (define (iter things answer)</span><br><span class="line">    (if (null? things)</span><br><span class="line">        (reverse answer)</span><br><span class="line">        (iter (cdr things)</span><br><span class="line">              (cons (square (car things))</span><br><span class="line">                    answer))))</span><br><span class="line">  (iter items &apos;()))</span><br></pre></td></tr></table></figure>
<p>分析如下：</p>
<pre><code>(square-list (list 1 2 3))                    -&gt;
(iter (1 2 3) &apos;())                            -&gt;
(iter (2 3) (cons 1 &apos;()))                    -&gt;
(iter (3) (cons 4 (cons 1 &apos;())))            -&gt;
(iter &apos;() (cons 9 (cons 4 (cons 1 &apos;()))))    -&gt;    (cons 9 (cons 4 (cons 1 &apos;()))) = (list 9 4 1)
(list 1 4 9)
</code></pre><h3 id="EX-2-23"><a href="#EX-2-23" class="headerlink" title="EX 2.23"></a>EX 2.23</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">;类似于map的定义，返回逻辑值</span><br><span class="line">(define (for-each proc items)</span><br><span class="line">  (if (null? items)</span><br><span class="line">      #f</span><br><span class="line">      (cons (proc (car items))</span><br><span class="line">            (for-each proc (cdr items)))))</span><br></pre></td></tr></table></figure>
            
          </span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                <a class="post-title-link" href="/2016/04/21/SICP-ex2-1(2)/" itemprop="url">
                  SICP 2.1节习题(2)
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            发表于
            <time itemprop="dateCreated" datetime="2016-04-21T20:09:17+08:00" content="2016-04-21">
              2016-04-21
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp; 分类于
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/SICP解题集/" itemprop="url" rel="index">
                    <span itemprop="name">SICP解题集</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

        </div>
      </header>
    


    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody">
            
              <h1 id="第二章-构造数据抽象"><a href="#第二章-构造数据抽象" class="headerlink" title="第二章 构造数据抽象"></a>第二章 构造数据抽象</h1><h2 id="2-1-数据抽象引导"><a href="#2-1-数据抽象引导" class="headerlink" title="2.1 数据抽象引导"></a>2.1 数据抽象引导</h2><h3 id="EX-2-7"><a href="#EX-2-7" class="headerlink" title="EX 2.7"></a>EX 2.7</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">(define (upper-bound x) (cdr x))</span><br><span class="line"></span><br><span class="line">(define (lower-bound x) (car x))</span><br><span class="line"></span><br><span class="line">(define (make-interval a b) (cons a b))</span><br><span class="line"></span><br><span class="line">(define test (make-interval 1 2))</span><br></pre></td></tr></table></figure>
<h3 id="EX-2-8"><a href="#EX-2-8" class="headerlink" title="EX 2.8"></a>EX 2.8</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">(define (sub-interval x y)</span><br><span class="line">  (make-interval (- (lower-bound x) (lower-bound y))</span><br><span class="line">                 (- (upper-bound x) (upper-bound y))))</span><br></pre></td></tr></table></figure>
<h3 id="EX-2-9"><a href="#EX-2-9" class="headerlink" title="EX 2.9"></a>EX 2.9</h3><pre><code>显而易见，若两个区间分别为(1,2) (3,4)，被加宽度为0.5
对于加：(4,6)，宽度为0.5+0.5=1
对于减：(-2,-2),宽度为0.5-0.5=0
对于乘：p1=3 p2=4 p3=6 p4=8，(3,8), 宽度为2.5
对于除：第一个区间乘上第二个区间的倒数，p1=1/4 p2=1/3 p3=1/2 p4=2/3，(1/4,2/3)，宽度为5/24
</code></pre><h3 id="EX-2-10"><a href="#EX-2-10" class="headerlink" title="EX 2.10"></a>EX 2.10</h3><pre><code>显然，如果两个区间分别为(0,1)，(1,2)
对于除：取倒数的时候可能会出现分母为0的情况
如果区间横跨0，区间取倒数的时候会出现上界小于下界的情况，(-1,2)取倒数后(1/2, -1)
</code></pre><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">(define (new-div-interval x y)</span><br><span class="line">  (let ((y1 (lower-bound y))</span><br><span class="line">        (y2 (upper-bound y)))</span><br><span class="line">    (cond ((or (= y1 0) (= y2 0)) (display &quot;error&quot;))</span><br><span class="line">          ((&lt; y1 0) (display &quot;error&quot;))</span><br><span class="line">          (else</span><br><span class="line">           (mul-interval x</span><br><span class="line">                         (make-interval (/ 1.0 y1)</span><br><span class="line">                                        (/ 1.0 y2)))))))</span><br></pre></td></tr></table></figure>
            
          </span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                <a class="post-title-link" href="/2016/04/13/SICP-ex2-1(1)/" itemprop="url">
                  SICP 2.1节习题(1)
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            发表于
            <time itemprop="dateCreated" datetime="2016-04-13T21:33:17+08:00" content="2016-04-13">
              2016-04-13
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp; 分类于
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/SICP解题集/" itemprop="url" rel="index">
                    <span itemprop="name">SICP解题集</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

        </div>
      </header>
    


    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody">
            
              <h1 id="第二章-构造数据抽象"><a href="#第二章-构造数据抽象" class="headerlink" title="第二章 构造数据抽象"></a>第二章 构造数据抽象</h1><h2 id="2-1-数据抽象引导"><a href="#2-1-数据抽象引导" class="headerlink" title="2.1 数据抽象引导"></a>2.1 数据抽象引导</h2><h3 id="EX-2-1"><a href="#EX-2-1" class="headerlink" title="EX 2.1"></a>EX 2.1</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">(define (new-make-rat n d)</span><br><span class="line">  (let ((g (gcd n d)))</span><br><span class="line">    (cond ((or (and (&lt; n 0) (&lt; d 0)) (and (&gt; n 0) (&lt; d 0)))</span><br><span class="line">           (cons (- (/ n g)) (- (/ d g))))</span><br><span class="line">          (else (cons (/ n g) (/ d g))))))</span><br></pre></td></tr></table></figure>
<p><img src="/images/ex2-1.png" alt="“ex2-1”"></p>
<h3 id="EX-2-2"><a href="#EX-2-2" class="headerlink" title="EX 2.2"></a>EX 2.2</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">(define (make-segment start end)  ;构造函数make-segment</span><br><span class="line">  (cons start end))</span><br><span class="line"></span><br><span class="line">(define (start-segment segment)  ;选择函数start-segment</span><br><span class="line">  (car segment))</span><br><span class="line"></span><br><span class="line">(define (end-segment segment)  ;选择函数end-segment</span><br><span class="line">  (cdr segment))</span><br><span class="line"></span><br><span class="line">(define (make-point x y)	  ;构造函数make-point</span><br><span class="line">  (cons x y))</span><br><span class="line"></span><br><span class="line">(define (x-point point)  ;选择函数x-point</span><br><span class="line">  (car point))</span><br><span class="line"></span><br><span class="line">(define (y-point point)  ;选择函数y-point</span><br><span class="line">  (cdr point))</span><br><span class="line"></span><br><span class="line">;求线段中点</span><br><span class="line">(define (midpoint-segment segment)</span><br><span class="line">  (let ((start (start-segment segment))</span><br><span class="line">        (end (end-segment segment)))</span><br><span class="line">    (make-point (/ (+ (x-point start) (x-point end)) 2)</span><br><span class="line">                (/ (+ (y-point start) (y-point end)) 2))))</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">;测试程序</span><br><span class="line">(define start (make-point 1 3))</span><br><span class="line">(define end (make-point 4 3))</span><br><span class="line">(define seg (make-segment start end))</span><br><span class="line">(define mid (midpoint-segment seg))</span><br></pre></td></tr></table></figure>
<h3 id="EX-2-3"><a href="#EX-2-3" class="headerlink" title="EX 2.3"></a>EX 2.3</h3><p>两种矩形表示，一种采用两对线段(4条)，另一种采用两条相邻线段(2条)，主要设计抽象屏障，这里只采用后一种。当然还有别的表示方法，如<a href="https://github.com/spinab/sicp_exercise/blob/master/sicp_2_3.rkt" target="_blank" rel="external">三点表示</a>(我没有仔细研究)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">(define (make-rect seg1 seg2)  ;构造函数,构造矩形</span><br><span class="line">  (cons seg1 seg2))</span><br><span class="line">(define (seg1-in-rect rect)  ;选择函数,相邻的一条边a</span><br><span class="line">  (car rect))</span><br><span class="line">(define (seg2-in-rect rect)  ;选择函数,相邻的另一条边b</span><br><span class="line">  (cdr rect))</span><br><span class="line">(define (a-length rect)  ;a的长度</span><br><span class="line">  (let ((a (seg1-in-rect rect)))</span><br><span class="line">    (let ((a-startpt (start-segment a))</span><br><span class="line">          (a-endpt (end-segment a)))</span><br><span class="line">      (let ((a-x1 (x-point a-startpt))</span><br><span class="line">            (a-y1 (y-point a-startpt))</span><br><span class="line">            (a-x2 (x-point a-endpt))</span><br><span class="line">            (a-y2 (y-point a-endpt)))</span><br><span class="line">        (sqrt (+ (square (abs (- a-x1 a-x2))) (square (abs (- a-y1 a-y2)))))))))</span><br><span class="line">(define (b-length rect)  ;b的长度</span><br><span class="line">  (let ((b (seg2-in-rect rect)))</span><br><span class="line">    (let ((b-startpt (start-segment b))</span><br><span class="line">          (b-endpt (end-segment b)))</span><br><span class="line">      (let ((b-x1 (x-point b-startpt))</span><br><span class="line">            (b-y1 (y-point b-startpt))</span><br><span class="line">            (b-x2 (x-point b-endpt))</span><br><span class="line">            (b-y2 (y-point b-endpt)))</span><br><span class="line">        (sqrt (+ (square (abs (- b-x1 b-x2))) (square (abs (- b-y1 b-y2)))))))))</span><br><span class="line">(define (area-rect rect)	  ;计算面积,参数是矩形</span><br><span class="line">  (let ((a (a-length rect))</span><br><span class="line">        (b (b-length rect)))</span><br><span class="line">    (* a b)))</span><br><span class="line">(define (perimeter-rect rect)  ;计算周长,参数是矩形</span><br><span class="line">  (let ((a (a-length rect))</span><br><span class="line">        (b (b-length rect)))</span><br><span class="line">    (* (+ a b) 2)))</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">;测试程序</span><br><span class="line">;(define p1 (make-point 1 2))  ;p1 p2 p3,边不平行于坐标轴的矩形</span><br><span class="line">;(define p2 (make-point 2 3))</span><br><span class="line">;(define p3 (make-point 3 1))</span><br><span class="line">(define p1 (make-point 1 1))	  ;p1 p2 p3,边平行于坐标轴的矩形</span><br><span class="line">(define p2 (make-point 1 3))</span><br><span class="line">(define p3 (make-point 5 1))</span><br><span class="line">(define rectangle  ;测试所用的矩形</span><br><span class="line">  (make-rect (make-segment p1 p2)</span><br><span class="line">             (make-segment p1 p3)))</span><br></pre></td></tr></table></figure>
<h3 id="EX-2-4"><a href="#EX-2-4" class="headerlink" title="EX 2.4"></a>EX 2.4</h3><p>根据代换法则，分析一下这种过程性表示方式</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">(define (cons x y)</span><br><span class="line">  (lambda (m) (m x y)))</span><br><span class="line">(define (car z)</span><br><span class="line">  (z (lambda (p q) p)))</span><br></pre></td></tr></table></figure>
<pre><code>(car (cons x y))                        ——&gt;
(car (lambda (m) (m x y)))                ——&gt;
((lambda (m) (m x y)) (lambda (p q) p))    ——&gt;
((lambda (p q) p) x y)                    ——&gt;
x
</code></pre><p>代入具体的数字</p>
<pre><code>(car (cons 1 2))            ——&gt;
((lambda (p q) p) 1 2)        ——&gt;
1     
</code></pre><p>由代换结果分析，不难写出cdr的过程性表示</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">(define (cdr z)</span><br><span class="line">  (z (lambda (p q) q)))</span><br></pre></td></tr></table></figure>
<h3 id="EX-2-5"><a href="#EX-2-5" class="headerlink" title="EX 2.5"></a>EX 2.5</h3><p>(cons 2 3) = 108 = 2 <em> 2 </em> 3 <em> 3 </em> 3<br>将(cons 2 3)连续除以2，得到car。连续除以3，得到cdr</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">(define (cons x y)</span><br><span class="line">  (* (expt 2 x) (expt 3 y)))</span><br><span class="line"></span><br><span class="line">(define (car z)</span><br><span class="line">  (if (= 0 (remainder z 2))</span><br><span class="line">      (+ (car (/ z 2)) 1)</span><br><span class="line">      0))</span><br><span class="line"></span><br><span class="line">(define (cdr z)</span><br><span class="line">  (if (= 0 (remainder z 3))</span><br><span class="line">      (+ (cdr (/ z 3)) 1)</span><br><span class="line">      0))</span><br></pre></td></tr></table></figure>
<h3 id="EX-2-6"><a href="#EX-2-6" class="headerlink" title="EX 2.6"></a>EX 2.6</h3><p>根据书中给出的zero和add-1</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">(define zero </span><br><span class="line">  (lambda (f) (lambda (x) x)))</span><br><span class="line">(define (add-1 n)</span><br><span class="line">  (lambda (f) (lambda (x) (f ((n f) x)))))</span><br></pre></td></tr></table></figure>
<p>推导出one(one = zero + add-1)</p>
<pre><code>(add-1 zero)                                ——&gt;
(add-1 (lambda (f) (lambda (x) x)))            ——&gt;
(lambda (f) 
  (lambda (x) 
    (f (
      ((lambda (f) (lambda (x) x)) f) x))))    ——&gt;
(lambda (f)
  (lambda (x)
    (f 
      ((lambda (x) x) x))))                    ——&gt;
(lambda (f)
  (lambda (x)
    (f x)))                                    ——&gt;
得到one的定义
</code></pre><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">(define one</span><br><span class="line">  (lambda (f)</span><br><span class="line">	(lambda (x)</span><br><span class="line">	  (f x))))</span><br></pre></td></tr></table></figure>
<p>同理，求two的定义。two = one + add-1</p>
<pre><code>(add-1 one)                                    ——&gt;
(add-1 (lambda (f) (lambda (x) (f x))))        ——&gt;
(lambda (f)
  (lambda (x)
    (f ((n f) x))))                            ——&gt;将n代换为one
(lambda (f)
  (lambda (x)
    (f ((
      (lambda (f) (lambda (x) (f x))) f) 
        x))))                                ——&gt;化简lambda (f)
(lambda (f)
  (lambda (x)
    (f ( (lambda (x) (f x)) x))))            ——&gt;化简lambda (x)
(lambda (f)
  (lambda (x)
    (f (f x))))                                ——&gt;
得到two的定义
</code></pre><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">(define two</span><br><span class="line">  (lambda (f)</span><br><span class="line">    (lambda (x)</span><br><span class="line">      (f (f x)))))</span><br></pre></td></tr></table></figure>
<p>根据zero，one，two的定义</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">(define zero		;no f</span><br><span class="line">  (lambda (f) </span><br><span class="line">	(lambda (x) </span><br><span class="line">	  x)))</span><br><span class="line">(define one			;one f</span><br><span class="line">  (lambda (f)</span><br><span class="line">	(lambda (x)</span><br><span class="line">	  (f x))))</span><br><span class="line">(define two			;two f</span><br><span class="line">  (lambda (f)</span><br><span class="line">    (lambda (x)</span><br><span class="line">      (f (f x)))))</span><br></pre></td></tr></table></figure>
<p>据此推导加法过程定义(对此仍不太懂，没有理解FP，柯里化之类的内容)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">(define church-add</span><br><span class="line">  (lambda (m n)</span><br><span class="line">	(lambda (f)</span><br><span class="line">	  (lambda (x)</span><br><span class="line">		(m f (n f x))))))</span><br></pre></td></tr></table></figure>
            
          </span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                <a class="post-title-link" href="/2016/03/24/SICP2/" itemprop="url">
                  《计算机程序的解释和构造(SICP)》 (2)
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            发表于
            <time itemprop="dateCreated" datetime="2016-03-24T11:23:50+08:00" content="2016-03-24">
              2016-03-24
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp; 分类于
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/SICP/" itemprop="url" rel="index">
                    <span itemprop="name">SICP</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

        </div>
      </header>
    


    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody">
            
              <p>断断续续看完第一章的三节公开课，做完第一章的课后习题，回顾一下。</p>
<ul>
<li><p>Lisp的基本语法</p>
</li>
<li><p>组合式的概念</p>
<p>  例如: (+ 3 (* 5 6))</p>
</li>
<li><p>表达式类型</p>
<ul>
<li>numbers </li>
<li>symbol </li>
<li>lambda-expressions </li>
<li>definitions </li>
<li>conditionals(条件表达式) </li>
<li><p>combinations(组合式)</p>
<p>例如：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">(define  a  (* 5 5))  ;a是符号</span><br><span class="line">(define (a) (* 5 5))  ;a是过程</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>应用序和正则序</p>
<p>  应用序：先求参后应用<br>  正则序：先展开后规约</p>
</li>
<li><p>线性递归(Linear-Recurison)与迭代(Iteration)，时间复杂度、空间复杂度简单分析</p>
</li>
<li><p>函数式编程(functional programming)将过程(函数)作为参数，返回值等等</p>
<p>  例如：</p>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">(define (compose f g)</span><br><span class="line">  (lambda (x)</span><br><span class="line">    (f (g x))))</span><br></pre></td></tr></table></figure>
<ul>
<li><p>复杂问题的分析与分解，划分成一个个自问题来解决</p>
</li>
<li><p>语法糖衣(syntactic sugar)</p>
<ul>
<li><p>lambda</p>
<p>以下两种定义等价，都是f(x) = x + 1</p>
</li>
</ul>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(define (f x) (+ x 1))</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">(define f </span><br><span class="line">  (lambda (x) </span><br><span class="line">    (+ x 1)))</span><br></pre></td></tr></table></figure>
<ul>
<li><p>let</p>
<p> 以下两种定义等价，都是f(x) = 2x + 1</p>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">(define (f x)</span><br><span class="line">  ((lambda (a)		;a + x </span><br><span class="line">    (+ a x))</span><br><span class="line">  (+ 1 x))		;a = x + 1</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">(define (f x)</span><br><span class="line">  (let ((a (+ x 1)))	;a = x + 1</span><br><span class="line">    (+ a x)))		;a + x</span><br></pre></td></tr></table></figure>
            
          </span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                <a class="post-title-link" href="/2016/03/23/SICP-ex1-3(3)/" itemprop="url">
                  SICP 1.3节习题(3)
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            发表于
            <time itemprop="dateCreated" datetime="2016-03-23T20:10:07+08:00" content="2016-03-23">
              2016-03-23
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp; 分类于
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/SICP解题集/" itemprop="url" rel="index">
                    <span itemprop="name">SICP解题集</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

        </div>
      </header>
    


    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody">
            
              <h1 id="第一章-构造过程抽象"><a href="#第一章-构造过程抽象" class="headerlink" title="第一章 构造过程抽象"></a>第一章 构造过程抽象</h1><h2 id="1-3-用高阶函数做抽象"><a href="#1-3-用高阶函数做抽象" class="headerlink" title="1.3 用高阶函数做抽象"></a>1.3 用高阶函数做抽象</h2><h3 id="EX-1-40"><a href="#EX-1-40" class="headerlink" title="EX 1.40"></a>EX 1.40</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">;定义过程cubic</span><br><span class="line">(define (cubic a b c)</span><br><span class="line">  (lambda (x) (+ (cube x) (* a (square x)) (* b x) c)))</span><br></pre></td></tr></table></figure>
<h3 id="EX-1-41"><a href="#EX-1-41" class="headerlink" title="EX 1.41"></a>EX 1.41</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">(define (double f)</span><br><span class="line">  (lambda (x)</span><br><span class="line">    (f (f x))))</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(((double (double double)) inc) 5)  ;答案是21</span><br></pre></td></tr></table></figure>
<p>分析:<br>((double inc) 5)                     将inc应用2^1次,结果为7<br>(((double double) inc) 5)            将inc应用2^2次,结果为9<br>((double (double double)) inc) 5)    将inc应用(2^2)^2次,结果为21</p>
<h3 id="EX-1-42"><a href="#EX-1-42" class="headerlink" title="EX 1.42"></a>EX 1.42</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">(define (compose f g)</span><br><span class="line">  (lambda (x)</span><br><span class="line">    (f (g x))))</span><br></pre></td></tr></table></figure>
<h3 id="EX-1-43"><a href="#EX-1-43" class="headerlink" title="EX 1.43"></a>EX 1.43</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">;递归版本</span><br><span class="line">(define (repeated f n)</span><br><span class="line">  (if (= n 1)</span><br><span class="line">      f</span><br><span class="line">      (lambda (x)</span><br><span class="line">        (f ((repeated f (- n 1)) x)))))</span><br><span class="line">;迭代版本</span><br><span class="line">(define (re-iter f n)</span><br><span class="line">  (define (iter i f-result)</span><br><span class="line">    (if (= i n)</span><br><span class="line">        f-result</span><br><span class="line">        (iter (+ i 1) (lambda (x) (f (f-result x))))))</span><br><span class="line">  (iter 1 f))</span><br></pre></td></tr></table></figure>
<p>根据提示,可以使用EX 1.42的compose过程,省去了使用lambda</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">;使用compose的递归版本</span><br><span class="line">(define (repeated f n)</span><br><span class="line">  (if (= n 1)</span><br><span class="line">      f</span><br><span class="line">      (compose f (repeated f (- n 1)))))</span><br><span class="line">;使用compose的迭代版本</span><br><span class="line">(define (repeated f n)</span><br><span class="line">  (define (iter i f-result)</span><br><span class="line">    (if (= i n)</span><br><span class="line">        f-result</span><br><span class="line">        (iter (+ i 1) (compose f f-result))))</span><br><span class="line">  (iter 1 f))</span><br></pre></td></tr></table></figure>
<h3 id="EX-1-44"><a href="#EX-1-44" class="headerlink" title="EX 1.44"></a>EX 1.44</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">;一次平滑</span><br><span class="line">(define (smooth f)</span><br><span class="line">  (define dx 0.000001)</span><br><span class="line">  (lambda (x)</span><br><span class="line">    (/ (+ (f (- x dx)) (f x) (f (+ x dx))) 3))) </span><br><span class="line">;n次平滑</span><br><span class="line">(define (n-smooth f n)</span><br><span class="line">  (re1 smooth n) f)</span><br></pre></td></tr></table></figure>
            
          </span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><a class="extend next" rel="next" href="/page/3/"><i class="fa fa-angle-right"></i></a>
  </nav>


 </div>

        

        
      </div>

      
        
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel  sidebar-panel-active ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" src="/uploads/avatar.jpg" alt="Carl John" itemprop="image"/>
          <p class="site-author-name" itemprop="name">Carl John</p>
        </div>
        <p class="site-description motion-element" itemprop="description"></p>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">30</span>
              <span class="site-state-item-name">日志</span>
            </a>
          </div>

          <div class="site-state-item site-state-categories">
            <a href="/categories">
              <span class="site-state-item-count">6</span>
              <span class="site-state-item-name">分类</span>
              </a>
          </div>

          <div class="site-state-item site-state-tags">
            <a href="/tags">
              <span class="site-state-item-count">10</span>
              <span class="site-state-item-name">标签</span>
              </a>
          </div>

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        <div class="links-of-author motion-element">
          
        </div>

      </section>

      

    </div>
  </aside>


      
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner"> <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="icon-next-heart fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Carl John</span>
</div>

<div class="powered-by">
  由 <a class="theme-link" href="http://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Mist
  </a>
</div>


 </div>
    </footer>

    <div class="back-to-top"></div>
  </div>

  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  
  
  
    
    

  


  
  
  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js"></script>
  <script type="text/javascript" src="/js/fancy-box.js?v=0.4.5.2"></script>


  <script type="text/javascript" src="/js/helpers.js?v=0.4.5.2"></script>
  

  <script type="text/javascript" src="/vendors/velocity/velocity.min.js"></script>
  <script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js"></script>

  <script type="text/javascript" src="/js/motion_global.js?v=0.4.5.2" id="motion.global"></script>




  <script type="text/javascript" src="/js/nav-toggle.js?v=0.4.5.2"></script>
  <script type="text/javascript" src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  

  <script type="text/javascript">
    $(document).ready(function () {
      if (CONFIG.sidebar === 'always') {
        displaySidebar();
      }
      if (isMobile()) {
        FastClick.attach(document.body);
      }

      motionIntegrator.bootstrap();
    });
  </script>

  
  

  
  

  
  <script type="text/javascript" src="/js/lazyload.js"></script>
  <script type="text/javascript">
    $(function () {
      $("#posts").find('img').lazyload({
        placeholder: "/images/loading.gif",
        effect: "fadeIn"
      });
    });
  </script>
</body>
</html>
